find_package(MKL)
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH_TMP})

if(MKL_FOUND)
  option(USE_MKL "Use MKL to speed up Eigen operations" YES)
endif()

if(MKL_FOUND AND USE_MKL) 
  add_library(MKL INTERFACE IMPORTED)
  set_property(TARGET MKL PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${MKL_INCLUDE_DIRS})
  set_property(TARGET MKL PROPERTY INTERFACE_LINK_LIBRARIES ${MKL_LIBRARIES})
  set_property(TARGET MKL PROPERTY INTERFACE_COMPILE_OPTIONS "-DEIGEN_USE_MKL_ALL")
  set(MKL_TARGET MKL)
else()
  set(MKL_TARGET "")
endif()
